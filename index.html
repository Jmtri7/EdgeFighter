<!DOCTYPE html>
<html>
<canvas id="test">
<script>

class Painter {
	static fill(canvas, color) {
		Painter.box(canvas, 0, 0, canvas.width, canvas.height, color);
	}
	static clear(canvas) {
		canvas.getContext("2d").clearRect(0, 0, canvas.width, canvas.height);
	}

	static box(canvas, x, y, w, h, color) {
		canvas.getContext("2d").fillStyle = color;
		canvas.getContext("2d").fillRect(x, y, w, h);
	}
	static circle(canvas, x, y, r, color) {
		canvas.getContext("2d").beginPath();
		canvas.getContext("2d").arc(x, y, r, 0, 2 * Math.PI);
		canvas.getContext("2d").fillStyle = color;
		canvas.getContext("2d").fill();
	}
}

class Point {
	constructor(x, y) {
		this.x = x;
		this.y = y;
	}
	copy() {
		return new Point(this.x, this.y);
	}
	translate(dx, dy) {
		if(dy == undefined) {
			console.log("Error: dy undefined in point translate!");
			dy = 0;
		}
		this.x += dx;
		this.y += dy;
		return this;
	}
	rotate(center, angle) {
		let dx = this.x - center.x;
		let dy = this.y - center.y;
		let r = Math.sqrt(dx * dx + dy * dy);
		this.x = center.x + r * Math.cos(angle / 180 * Math.PI);
		this.y = center.y + r * Math.sin(angle / 180 * Math.PI);
		return this;
	}
	paint(canvas) {
		canvas.getContext("2d").beginPath();
		canvas.getContext("2d").arc(this.x, this.y, 2, 0, 2 * Math.PI);
		canvas.getContext("2d").fillStyle = "black";
		canvas.getContext("2d").fill();
	}
}

class Edge {
	constructor(p1, p2) {
		this.p1 = p1;
		this.p2 = p2;
	}
	intersect(that) {
		return this.p1.x <= that.p2.x
        	&& this.p2.x >= that.p1.x
        	&& this.p1.y <= that.p2.y
        	&& this.p2.y >= that.p1.y;
	}
	paint(canvas) {
		canvas.getContext("2d").beginPath();
		canvas.getContext("2d").moveTo(this.p1.x, this.p1.y);
		canvas.getContext("2d").lineTo(this.p2.x, this.p2.y);
		canvas.getContext("2d").stroke();
	}
	copy() {
		return new Edge(this.p1, this.p2);
	}
	translate(dx, dy) {
		this.p1.translate(dx, dy);
		this.p2.translate(dx, dy);
		return this;
	}
	rotate(center, angle) {
		this.p1.rotate(center, angle);
		this.p2.rotate(center, angle);
		return this;
	}
}

class Fighter {
	constructor(x, y) {

		var anchor = new Point(x, y);

		var upperArmBend = 30;
		var lowerArmBend = -30;

		var upperArmLength = 50;
		var lowerArmLength = 50;

		var armWidth = 10;

		var edge1 = new Edge(
			anchor.copy(), 
			anchor.copy().translate(upperArmLength, 0),
		);
		var edge2 = new Edge(
			edge1.p2.copy(), 
			edge1.p2.copy().translate(lowerArmLength, 0),
		);

		edge1.rotate(edge1.p1, upperArmBend);
		edge2.rotate(edge1.p1, upperArmBend);
		edge2.rotate(edge1.p2, lowerArmBend);

		this.vertices = [
			edge1.p1,
			edge1.p2,
			edge2.p1,
			edge2.p2,
		];
		this.edges = [

		];
		this.body = [
			edge1,
			edge2,
		];
		this.weapon = [

		];
	}
	paint(canvas) {
		for(var i = 0; i < this.vertices.length; i++) {
			this.vertices[i].paint(canvas);
		}
		for(var i = 0; i < this.body.length; i++) {
			this.body[i].paint(canvas);
		}
	}
}

document.body.style.backgroundColor = "black";
document.body.style.margin = "0px 0px 0px 0px";

var canvas = document.getElementById("test");
canvas.width = 700;
canvas.height = 500;

var player1 = new Fighter(100, 100);
var cursor = new Point(0, 0);

document.onmousemove = function(e) {
    cursor.x = e.pageX;
    cursor.y = e.pageY;
    if (cursor.x < 0) cursor.x = 0;
    if (cursor.y < 0) cursor.y = 0;
};
function onTimerTick() {

	Painter.fill(canvas, "white");

	player1.paint(canvas);

	cursor.paint(canvas);

}
setInterval(onTimerTick, 33); // 33 milliseconds = ~ 30 frames per sec

</script>
</html>